For this question, I used Graphql to get all jobAllocations and activityAllocations then map them to resource.
created Data service is getAllocations()
because of some limitations and don't have experience in Graphql, so use reduce function (JS) to filtered data again.